####################
Technical Properties
####################

*****
About
*****

While our MODS to RDF mapping aims to address how descriptive properties should be mapped in our next system, this
section aims to explain how to map existing technical metadata properties our metadata properties that we need going
forward.  When a technical metadata property may exist, its current mapping is described.

**********
Namespaces
**********

+------------------------------+--------------+-------------------------------------------------------------+
| Vocabulary Name              | Prefix       | URI                                                         |
+==============================+==============+=============================================================+
| BIBFRAME                     | bf           | http://id.loc.gov/ontologies/bibframe/                      |
+------------------------------+--------------+-------------------------------------------------------------+
| EBUCORE                      | ebu          | http://www.ebu.ch/metadata/ontologies/ebucore/ebucore#width |
+------------------------------+--------------+-------------------------------------------------------------+
| DCMI Metadata Terms          | dcterms      | http://purl.org/dc/terms/                                   |
+------------------------------+--------------+-------------------------------------------------------------+

*******
Mapping
*******

Duration
========

Use Case
--------

For audio / visual files, it is essential that we are able to measure the length of a the file that is associated with a
IIIF canvas.  This is particularly important when you have multiple a/v files on a single canvas.

Justification
-------------

In order to have valid IIIF presentation manifests that function as expected, we need this data.  While the data could be
generated by default (on ingest / processing later), we currently have this data for some files and could easily add it
on migration or to our existing legacy repository objects.

Path to Existing Data
---------------------

Currently, this data is stored in the Fedora Resource Index and corresponding A/V proxy triples in the :code:`RELS-INT`
of a work (when it exists).

Note, the data is currently in a bad property, :code:`http://id.loc.gov/ontologies/bibframe/#`.

Decision
--------

`Example of a record with a duration on its MP4 - rfta:8 <https://digital.lib.utk.edu/collections/islandora/object/rfta:8/datastream/RELS-INT>`_

.. code-block:: turtle

    @prefix bf: <http://id.loc.gov/ontologies/bibframe/#> .

    <info:fedora/rfta:8/MP4> bf:duration "00:57:15" .

In the future, this should be stored on a file like this:

.. code-block:: turtle

    @prefix : <https://location-of-future-repository/extra/paths/> .
    @prefix bf: <http://id.loc.gov/ontologies/bibframe/> .
    @prefix fedora:  <http://fedora.info/definitions/v4/repository#> .
    @prefix pcdm: <http://pcdm.org/models#> .
    @prefix pcdmff: <http://pcdm.org/file-format-types#> .
    @prefix pcdmuse: <http://pcdm.org/use#> .
    @prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .

    :rfta_8_mp4 a pcdmuse:IntermediateFile, pcdmff:Video ;
        rdfs:label "MP4" ;
        pcdm:fileOf :rfta_8 ;
        bf:duration "00:57:15" ;
        fedora:hasVersions :path-to-the-intermediate-file-for-rftaartists_53 .


File Language
=============

Use Case
--------

A work may be in one language but have related files in multiple other languages.

Justification
-------------

For certain files, it is important that we understand what language they are in.  An example of this are closed-captioning
and subtitle files.  By having the language, when necessary we can map the language to the body of an annotation on the IIIF
manifest.  This is especially important when we have files in multiple languages on a single canvas.

Because this needs to be in the IIIF manifest, this should be formatted as :code:`BCP-47`.

Path to Existing Data
---------------------

Currently, this data only relates to the :code:`DSID`.

Examples:

* TRANSCRIPT (ENGLISH)
* TRANSCRIPT-ES (SPANISH)

Decision
--------

`Example of a record with a TRANSCRIPT and TRANSCRIPT-ES - rfta:165 <https://digital.lib.utk.edu/collections/islandora/object/rfta:165/manage>`_


In the future, this should be stored on a file like this:

.. code-block:: turtle

    @prefix : <https://location-of-future-repository/extra/paths/> .
    @prefix dcterms: <http://purl.org/dc/terms/> .
    @prefix fedora:  <http://fedora.info/definitions/v4/repository#> .
    @prefix pcdm: <http://pcdm.org/models#> .
    @prefix pcdmuse: <http://pcdm.org/use#> .
    @prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .

    :rfta_165_english_transcript a pcdmuse:Transcript ;
        rdfs:label "English Subtitles" ;
        pcdm:fileOf :rfta_165_mp4_fileset ;
        dcterms:language "en" ;
        fedora:hasVersions :path-to-the-engilsh .

    :rfta_165_spanish_transcript a pcdmuse:Transcript ;
        rdfs:label "Spanish Subtitles" ;
        pcdm:fileOf :rfta_165_mp4_fileset ;
        dcterms:language "es" ;
        fedora:hasVersions :path-to-the-spanish .

Frame Height
============

Use Case
--------

Video files do not have a standard height across the repository, but height is important for display in certain viewers.

Height is unecessary for images because that should be supplied by the image server.

Justification
-------------

For video files, it is important that we know its height for displaying the canvas in the viewer.

Hyrax uses :code:`http://www.ebu.ch/metadata/ontologies/ebucore/ebucore#height` for this, but it is not dereferenceable
or content negotiable.  Regardless, this only contains a literal so there is no reason to use something else

Path to Existing Data
---------------------

Currently, this data is stored in the Fedora Resource Index and corresponding A/V proxy triples in the :code:`RELS-INT`
of a work (when it exists).

Decision
--------

`Example of a record with a duration on its MP4 - rftaart:55 <https://digital.lib.utk.edu/collections/islandora/object/rfta:55/datastream/RELS-INT>`_

.. code-block:: turtle

    @prefix ebu: <http://www.ebu.ch/metadata/ontologies/ebucore/ebucore#> .

    <info:fedora/rfta:8/MP4> ebu:height 1080 .

In the future, this should be stored on a file like this:

.. code-block:: turtle

    @prefix : <https://location-of-future-repository/extra/paths/> .
    @prefix ebu: <http://www.ebu.ch/metadata/ontologies/ebucore/ebucore#> .
    @prefix fedora:  <http://fedora.info/definitions/v4/repository#> .
    @prefix pcdm: <http://pcdm.org/models#> .
    @prefix pcdmff: <http://pcdm.org/file-format-types#> .
    @prefix pcdmuse: <http://pcdm.org/use#> .
    @prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .

    :rfta_8_mp4 a pcdmuse:IntermediateFile, pcdmff:Video ;
        rdfs:label "MP4" ;
        pcdm:fileOf :rfta_8 ;
        ebu:height 1080 ;
        fedora:hasVersions :path-to-the-intermediate-file-for-rftaartists_53 .

Frame Width
===========

Use Case
--------

Video files do not have a standard width across the repository, but width is important for display in certain viewers.

Width is unecessary for images because that should be supplied by the image server.

Justification
-------------

For video files, it is important that we know its width for displaying the canvas in the viewer.

Hyrax uses :code:`http://www.ebu.ch/metadata/ontologies/ebucore/ebucore#width` for this, but it is not dereferenceable
or content negotiable.  Regardless, this only contains a literal so there is no reason to use something else

Path to Existing Data
---------------------

Currently, this data is stored in the Fedora Resource Index and corresponding A/V proxy triples in the :code:`RELS-INT`
of a work (when it exists).

Decision
--------

`Example of a record with a duration on its MP4 - rftaart:55 <https://digital.lib.utk.edu/collections/islandora/object/rfta:55/datastream/RELS-INT>`_

.. code-block:: turtle

    @prefix ebu: <http://www.ebu.ch/metadata/ontologies/ebucore/ebucore#> .

    <info:fedora/rfta:8/MP4> ebu:width 1920 .

In the future, this should be stored on a file like this:

.. code-block:: turtle

    @prefix : <https://location-of-future-repository/extra/paths/> .
    @prefix ebu: <http://www.ebu.ch/metadata/ontologies/ebucore/ebucore#> .
    @prefix fedora:  <http://fedora.info/definitions/v4/repository#> .
    @prefix pcdm: <http://pcdm.org/models#> .
    @prefix pcdmff: <http://pcdm.org/file-format-types#> .
    @prefix pcdmuse: <http://pcdm.org/use#> .
    @prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .

    :rfta_8_mp4 a pcdmuse:IntermediateFile, pcdmff:Video ;
        rdfs:label "MP4" ;
        pcdm:fileOf :rfta_8 ;
        ebu:width 1920 ;
        fedora:hasVersions :path-to-the-intermediate-file-for-rftaartists_53 .
